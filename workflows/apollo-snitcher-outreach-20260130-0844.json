{
  "updatedAt": "2026-01-30T07:43:57.705Z",
  "createdAt": "2025-09-14T12:00:59.570Z",
  "id": "Qa9cQUtBYZolfA2h",
  "name": "Apollo Snitcher Outreach",
  "description": "",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {},
      "id": "f6f7812d-1503-4c02-9ed5-80b20e99fc69",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -12080,
        15712
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyX",
              "unit": "minutes"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Companies",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit#gid=0"
        },
        "options": {}
      },
      "id": "0acef691-a636-40dc-a899-4cf8ed364f9f",
      "name": "Google Sheets Trigger2",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "position": [
        -11936,
        16112
      ],
      "typeVersion": 1,
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "9RJNCJEeis90cQLW",
          "name": "Google Sheets Trigger account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://api.apollo.io/api/v1/organizations/enrich",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "domain",
              "value": "=  {{ $json.Website.extractDomain().replace(/^www\\./, '') }}\n"
            }
          ]
        },
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "options": {}
      },
      "id": "5314a78c-f910-4604-81da-a2a03422ec8d",
      "name": "Apollo Organization Enrichment2",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -9488,
        16128
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const baseUrl = 'https://api.apollo.io/api/v1/mixed_people/search';\nconst titles = [\n  'Head of Data',\n  'Chief Data Officer',\n  'Data Architect',\n  'Data Governance Lead',\n  'Head of Data & Analytics',\n  'Enterprise Data Architect',\n  'Data Management Specialist',\n  'Data Platform Lead',\n  'Data Strategy Director',\n  'CTO',\n  'CIO',\n  'Head of IT'\n];\n\nconst titleParams = titles.map(t => `person_titles[]=${encodeURIComponent(t)}`).join('&');\n\n// Získej doménu z aktuálního itemu (protože Loop zpracovává po 1)\nconst domain = $json.Domain;\n\nconsole.log('=== PROCESSING DOMAIN ===');\nconsole.log('Domain:', domain);\n\nif (!domain || domain.trim() === '') {\n  throw new Error(`No domain found in current item`);\n}\n\n// Vytvoř URL jen pro TUTO doménu\nconst domainParam = `q_organization_domains=${encodeURIComponent(domain)}`;\nconst perPageParam = 'per_page=40';\nconst fullUrl = `${baseUrl}?${titleParams}&${domainParam}&${perPageParam}`;\n\nconsole.log('=== FINAL URL ===');\nconsole.log(fullUrl);\n\nreturn [{ json: { url: fullUrl, domain: domain } }];\n\n/* const baseUrl = 'https://api.apollo.io/api/v1/mixed_people/search';\nconst titles = [\n  'Head of Data',\n  'Chief Data Officer',\n  'Data Architect',\n  'Data Governance Lead',\n  'Head of Data & Analytics',\n  'Enterprise Data Architect',\n  'Data Management Specialist',\n  'Data Platform Lead',\n  'Data Strategy Director',\n  'CTO',\n  'CIO',\n  'Head of IT'\n];\nconst titleParams = titles.map(t => `person_titles[]=${encodeURIComponent(t)}`).join('&');\nconst domains = $input.all().map(item => item.json.Domain);\nconst domainParams = domains.map(d => `q_organization_domains_list[]=${encodeURIComponent(d)}`).join('&');\nconst perPageParam = 'per_page=40';\nconst fullUrl = `${baseUrl}?${titleParams}&${domainParams}&${perPageParam}`;\nreturn [{ json: { url: fullUrl } }];\n*/"
      },
      "id": "e931cbfb-5213-4559-a9ba-d6963998e453",
      "name": "Create Apollo People Search URL2",
      "type": "n8n-nodes-base.code",
      "position": [
        -8544,
        16624
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.url }}",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "options": {}
      },
      "id": "016f8047-43d2-48bf-90fa-813c4a23807c",
      "name": "Apollo Find Decision Makers2",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -7776,
        16256
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "City": "={{ $('Validate Job Title1').item.json.city }}",
            "Name": "={{ $('Validate Job Title1').item.json.name }}",
            "State": "={{ $('Validate Job Title1').item.json.state }}",
            "Company": "={{ $('Validate Job Title1').item.json.organization.name }}",
            "Country": "={{ $('Validate Job Title1').item.json.country }}",
            "Job Title": "={{ $('Validate Job Title1').item.json.title }}",
            "Date Added": "={{ $now.toUTC().toFormat('yyyy-MM-dd') }}\n",
            "Start Date": "={{ $('Validate Job Title1').item.json.employment_history[0].start_date }}",
            "Company Domain": "={{ $('Validate Job Title1').item.json.organization.primary_domain }}",
            "LinkedIn Profile URL": "={{ $('Validate Job Title1').item.json.linkedin_url }}",
            "GPT Department Classification": "={{ $('AI Department Classification1').item.json.message.content }}",
            "Lead Score": "={{ $json.content[0].text }}"
          },
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Job Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Start Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Department Classification",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn Profile URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "City",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "State",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Country",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Verified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Date Added",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Last Contacted Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Follow-Up Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Score",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Score",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "45af4f61-89a3-4875-8e43-57e373c6fef8",
      "name": "Add Contacts2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -7120,
        15504
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apollo.io/api/v1/people/bulk_match?reveal_personal_emails=false&reveal_phone_number=false",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json }}",
        "options": {}
      },
      "id": "e7defd1a-828b-4a8c-82ba-64db00323284",
      "name": "Apollo Enrich Decision Makers2",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -4720,
        16000
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "jsCode": "const details = $input.all().map(item => ({                                                                                                                                                  \n    id: item.json['ID']                                                                                                                                                                        \n  }));                                                                                                                                                                                         \n                                                                                                                                                                                               \n  return [{ json: { details } }];    "
      },
      "id": "9c2f76fa-3394-4640-affa-37712bf5d941",
      "name": "Create Apollo People Enrichment Payload2",
      "type": "n8n-nodes-base.code",
      "position": [
        -4928,
        15920
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Name": "={{ $json.name }}",
            "Job Title": "={{ $json.title }}",
            "Start Date": "=",
            "Email Address": "={{ $json.email }}",
            "Email Verified": "={{ $json.email_status === 'verified' ? 'Yes' : 'No' }}\n",
            "LinkedIn Profile URL": "={{ $json.linkedin_url }}",
            "Country": "={{ $json.country }}",
            "City": "={{ $json.city }}",
            "State": "={{ $json.state }}",
            "Lead Status": "=pending",
            "Company Domain": "=",
            "Company": "={{ $json.employment_history[0].organization_name }}",
            "ID": "={{ $json.id }}"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "displayName": "Start Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "displayName": "GPT Department Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LinkedIn Profile URL",
              "displayName": "LinkedIn Profile URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Company Domain",
              "displayName": "Company Domain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "displayName": "City",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "displayName": "State",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "displayName": "Country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "displayName": "Email Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Verified",
              "displayName": "Email Verified",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "displayName": "Date Added",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "displayName": "Last Contacted Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "displayName": "Lead Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "displayName": "Follow-Up Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Score",
              "displayName": "Lead Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn Profile URL (using to match)",
              "displayName": "LinkedIn Profile URL (using to match)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Apollo Contact ID",
              "displayName": "Apollo Contact ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Sequence Added Date",
              "displayName": "Sequence Added Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "\nPersonalized AI Icebreaker",
              "displayName": "\nPersonalized AI Icebreaker",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "4e4d48db-9683-4bcd-b4be-9422db1b1451",
      "name": "Enrich Contacts2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -3968,
        15680
      ],
      "typeVersion": 4.5,
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "batchSize": 10,
        "options": {}
      },
      "id": "e909df23-0743-471a-a82a-7fbe5b767a91",
      "name": "Loop Over Items For Bulk Enrichment (10 per batch)2",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -5296,
        15968
      ],
      "typeVersion": 3
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apollo.io/api/v1/mixed_companies/search",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "q_organization_name",
              "value": "={{ $json['Company Name'] }}"
            }
          ]
        },
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "options": {}
      },
      "id": "f95ef1b3-f767-4066-bd13-ecf67c5cf0f7",
      "name": "Apollo Organization Search2",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -10528,
        15968
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "columns": {
          "value": {
            "Phone": "=",
            "Domain": "={{ $json.organizations[0].primary_domain }}",
            "Twitter": "=",
            "Website": "={{ $json.organizations[0].website_url }}",
            "Facebook": "=",
            "Industry": "=",
            "LinkedIn": "=",
            "Revenue ($)": "=",
            "Company Name": "={{ $json.organizations[0].name }}",
            "Founded Year": "=",
            "Headquarters": "=",
            "Total Funding": "=",
            "Company Description": "=",
            "Latest Funding Stage": "=",
            "Company Size (Employees)": "=",
            "Lastest Funding Round Date": "="
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "d0357865-bf08-4c5c-be74-f1a52dd5fcc4",
      "name": "Add Company Website2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -10320,
        15968
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "sendAndWait",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09GNDM3DFA",
          "mode": "list",
          "cachedResultName": "dw-n8n-snitcher-outreach-wf"
        },
        "message": "Please review the Companies tab of the spreadsheet (https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit?gid=0#gid=0) to verify that the correct domain names were retrieved. If needed, simply find and paste correct website URL of the company in the Website column (the Domain column will be populated automatically).",
        "options": {}
      },
      "id": "1f318926-9b16-4865-a51b-38b3534edb18",
      "name": "Approve Company Website2",
      "type": "n8n-nodes-base.slack",
      "position": [
        -9952,
        15888
      ],
      "webhookId": "830f75dd-f56e-4086-90ac-72ca14e226ce",
      "typeVersion": 2.3,
      "credentials": {
        "slackOAuth2Api": {
          "id": "9OZDdXhnfY0Jj3n3",
          "name": "Slack account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "columns": {
          "value": {
            "Phone": "={{ $json.organization.sanitized_phone ?? '' }}",
            "Domain": "={{ $('Apollo Organization Enrichment2').item.json.organization.primary_domain }}",
            "Status": "Processed",
            "Twitter": "={{ $('Apollo Organization Enrichment2').item.json.organization.twitter_url }}",
            "Website": "={{ $('Apollo Organization Enrichment2').item.json.organization.website_url }}",
            "Facebook": "={{ $('Apollo Organization Enrichment2').item.json.organization.facebook_url }}",
            "Industry": "={{ $('Apollo Organization Enrichment2').item.json.organization.industries.join(\", \") }}",
            "LinkedIn": "={{ $('Apollo Organization Enrichment2').item.json.organization.linkedin_url }}",
            "Revenue ($)": "={{ $('Apollo Organization Enrichment2').item.json.organization.annual_revenue ?? '' }}",
            "Company Name": "={{ $('Apollo Organization Enrichment2').item.json.organization.name }}",
            "Founded Year": "={{ $('Apollo Organization Enrichment2').item.json.organization.founded_year }}",
            "Headquarters": "={{ $('Apollo Organization Enrichment2').item.json.organization.raw_address }}",
            "Total Funding": "={{ $('Apollo Organization Enrichment2').item.json.organization.total_funding }}",
            "Company Description": "={{ $('Apollo Organization Enrichment2').item.json.organization.short_description }}",
            "GPT Company Summary": "={{ $json.message.content }}",
            "Latest Funding Stage": "={{ $('Apollo Organization Enrichment2').item.json.organization.latest_funding_stage }}",
            "Company Size (Employees)": "={{ $('Apollo Organization Enrichment2').item.json.organization.estimated_num_employees }}",
            "Lastest Funding Round Date": "={{ \n  $('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date &&\n  DateTime.fromISO($('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date).isValid\n    ? DateTime.fromISO($('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date).toFormat('yyyy-MM-dd')\n    : ''\n}}"
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "c54748f3-ab08-4e1c-b4ec-0629b40428d5",
      "name": "Add Company Details2",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -8912,
        16128
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "785952c3-f58e-4d4e-b8c4-dea3ceb424b1",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              },
              "leftValue": "={{ $json.Status }}",
              "rightValue": "Processed"
            }
          ]
        },
        "options": {}
      },
      "id": "81d8a468-a0f3-4054-b053-e4c59ea01544",
      "name": "Select Unprocessed Companies2",
      "type": "n8n-nodes-base.filter",
      "position": [
        -11392,
        16128
      ],
      "notesInFlow": false,
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "9087ca17-f034-4c87-b2b7-4e611ed2bcf5",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json.Domain }}",
              "rightValue": ""
            }
          ]
        },
        "options": {}
      },
      "id": "7b233fa3-9974-44ad-8f07-131c5d227b25",
      "name": "Is Domain Already Provided?2",
      "type": "n8n-nodes-base.if",
      "position": [
        -10752,
        16128
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "fieldToSplitOut": "people",
        "options": {}
      },
      "id": "cc83b2fa-310d-4595-99f0-20d8ee5f66c6",
      "name": "Split Out Batched Decision Maker Response2",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        -8304,
        15904
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "fieldToSplitOut": "matches",
        "options": {}
      },
      "id": "f1c9a5e5-fa64-4ff5-a90c-a2c5bf328f1e",
      "name": "Split Out Batched Enrichment Response2",
      "type": "n8n-nodes-base.splitOut",
      "position": [
        -5120,
        15648
      ],
      "typeVersion": 1
    },
    {
      "parameters": {},
      "id": "1a2850aa-e4af-4746-acdd-101467cf375c",
      "name": "Merge Rows Which Now All Contain Domains2",
      "type": "n8n-nodes-base.merge",
      "position": [
        -10000,
        16128
      ],
      "typeVersion": 3.1,
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "content": "## I'm a note \nGiven the company description \"{{ $json[\"Company Description\"] }}\", summarize the company's core business in one line."
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -10016,
        15680
      ],
      "typeVersion": 1,
      "id": "e7b43ffb-91ab-4f06-86bd-b1e5f08ef47b",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "claude-haiku-4-5-20251001",
          "mode": "list",
          "cachedResultName": "claude-haiku-4-5-20251001"
        },
        "messages": {
          "values": [
            {
              "content": "=Given the company description \"{{ $json.organization.short_description }}\", summarize the company's core business in one line."
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.anthropic",
      "typeVersion": 1,
      "position": [
        -9232,
        16128
      ],
      "id": "87d719c9-ece2-4228-88af-aa4ba23f1eb2",
      "name": "Message a model4",
      "credentials": {
        "anthropicApi": {
          "id": "asRQcBy4x1zPzz02",
          "name": "Anthropic account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "## I'm a note \nGiven the company description \"{{ $json.organization.short_description }}\", summarize the company's core business in one line."
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -10160,
        16704
      ],
      "typeVersion": 1,
      "id": "97ec49b2-da80-4842-b350-59a81cf8f144",
      "name": "Sticky Note16"
    },
    {
      "parameters": {
        "jsCode": "// Whitelist of allowed job titles\nconst allowedTitles = [\n  'Head of Data',\n  'Chief Data Officer',\n  'Data Architect',\n  'Data Governance Lead',\n  'Head of Data & Analytics',\n  'Enterprise Data Architect',\n  'Data Management Specialist',\n  'Data Platform Lead',\n  'Data Strategy Director',\n  'CTO',\n  'CIO',\n  'Head of IT'\n];\n\n// Get the current job title from Apollo response\nconst currentTitle = ($json.title || '').toLowerCase().trim();\n\n// Check if title contains any of the allowed keywords\nconst isValid = allowedTitles.some(title => \n  currentTitle.includes(title.toLowerCase())\n);\n\n// Return all data with validation flag\nreturn {\n  json: {\n    ...$json,\n    _is_valid: isValid\n  }\n};"
      },
      "id": "8771784c-582c-4b2a-b347-bcf9b2da5bc6",
      "name": "Validate Job Title1",
      "type": "n8n-nodes-base.code",
      "position": [
        -7184,
        15904
      ],
      "typeVersion": 2,
      "disabled": true
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "claude-haiku-4-5-20251001",
          "mode": "list",
          "cachedResultName": "claude-haiku-4-5-20251001"
        },
        "messages": {
          "values": [
            {
              "content": "=Given the job title \"{{ $json.title }}\", determine the most appropriate department within a company. Respond with only the department name. Don't include \"Department\"; e.g. say Sales instead of Sales Department.\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.anthropic",
      "typeVersion": 1,
      "position": [
        -6960,
        15904
      ],
      "id": "1ad0d06f-63e6-41ef-b8fa-cb3c8078ced2",
      "name": "AI Department Classification1",
      "credentials": {
        "anthropicApi": {
          "id": "asRQcBy4x1zPzz02",
          "name": "Anthropic account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "claude-haiku-4-5-20251001",
          "mode": "list",
          "cachedResultName": "claude-haiku-4-5-20251001"
        },
        "messages": {
          "values": [
            {
              "content": "=Given the job title \"{{ $json.title }}\", evaluate this position's decision-making authority and relevance for data/analytics B2B sales on a scale of 1-10:\n\nChief data officer\t10\nHead of Data\t9\nData Governance Lead\t9\nData Architect\t8\nData Strategy Director\t8\nEnterprise Data Architect, Data Platform Lead\t7\nHead of Analytics\t7\nC-Level IT executives (CTO or CIO)\t6\nHead of IT\t5\nData Management Specialist\t4\nAnalysts and junior roles\t3\nEntry-level positions\t2\nIrrelevant roles\t1\n\nWe don’t want to see i.e.: If we are looking dor the \"data architect\" we don’t look for the \"Azure Data Architect\" we need the people who are kinda accountable for the data governance.\n\nRespond with ONLY a single number between 1-10. No explanation, no text, just the number."
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.anthropic",
      "typeVersion": 1,
      "position": [
        -6672,
        15904
      ],
      "id": "863f721a-1768-42e2-bb75-f764d6de66e8",
      "name": "AI Lead Scoring1",
      "credentials": {
        "anthropicApi": {
          "id": "asRQcBy4x1zPzz02",
          "name": "Anthropic account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// DEBUG - ukaž strukturu dat                                                                                                                                                                \n  console.log('Počet položek:', items.length);                                                                                                                                                 \n  if (items.length > 0) {                                                                                                                                                                      \n    console.log('První položka klíče:', Object.keys(items[0].json));                                                                                                                           \n    console.log('První položka:', JSON.stringify(items[0].json, null, 2));                                                                                                                     \n  }                                                                                                                                                                                            \n                                                                                                                                                                                               \n  const groupedByCompany = {};                                                                                                                                                                 \n                                                                                                                                                                                               \n  items.forEach(item => {                                                                                                                                                                      \n    const companyName = item.json['Company'] || 'unknown';                                                                                                                                     \n    const personName = item.json['Name'] || 'Unknown';                                                                                                                                         \n    const title = item.json['Job Title'] || '';                                                                                                                                                \n    const leadScore = parseInt(item.json['Lead Score'] || '0') || 0;                                                                                                                           \n                                                                                                                                                                                               \n    console.log(`Processing: ${companyName} - ${personName} (${title}) - Score: ${leadScore}`);                                                                                                \n                                                                                                                                                                                               \n    if (!groupedByCompany[companyName] || groupedByCompany[companyName].leadScore < leadScore) {                                                                                               \n      groupedByCompany[companyName] = {                                                                                                                                                        \n        leadScore: leadScore,                                                                                                                                                                  \n        companyName: companyName,                                                                                                                                                              \n        personName: personName,                                                                                                                                                                \n        title: title,                                                                                                                                                                          \n        data: item.json                                                                                                                                                                        \n      };                                                                                                                                                                                       \n    }                                                                                                                                                                                          \n  });                                                                                                                                                                                          \n                                                                                                                                                                                               \n  const bestLeads = Object.values(groupedByCompany)                                                                                                                                            \n    .sort((a, b) => b.leadScore - a.leadScore);                                                                                                                                                \n                                                                                                                                                                                               \n  console.log('\\n=== VYSLEDEK ===');                                                                                                                                                           \n  console.log('Počet firem:', bestLeads.length);                                                                                                                                               \n                                                                                                                                                                                               \n  return bestLeads.map(entry => ({ json: entry.data }));         "
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -6000,
        15904
      ],
      "id": "c5235a7c-d030-42d7-b956-ff4f591ede16",
      "name": "Select Top Lead Per Company"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "City": "={{ $('Validate Job Title1').item.json.city }}",
            "Name": "={{ $('AI Department Classification1').item.json.first_name }} {{ $('AI Department Classification1').item.json.last_name_obfuscated }}",
            "State": "={{ $('Validate Job Title1').item.json.state }}",
            "Company": "={{ $('Validate Job Title1').item.json.organization.name }}",
            "Country": "={{ $('Validate Job Title1').item.json.country }}",
            "Job Title": "={{ $('Validate Job Title1').item.json.title }}",
            "Date Added": "={{ $now.toUTC().toFormat('yyyy-MM-dd') }}\n",
            "Start Date": "={{ $('Validate Job Title1').item.json.employment_history[0].start_date }}",
            "Company Domain": "={{ $('Validate Job Title1').item.json.organization.primary_domain }}",
            "LinkedIn Profile URL": "={{ $('Validate Job Title1').item.json.linkedin_url }}",
            "GPT Department Classification": "={{ $('AI Department Classification1').item.json.message.content }}",
            "Lead Score": "={{ $json.content[0].text }}",
            "ID": "={{ $('AI Department Classification1').item.json.id }}"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Start Date",
              "displayName": "Start Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "GPT Department Classification",
              "displayName": "GPT Department Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL",
              "displayName": "LinkedIn Profile URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Company Domain",
              "displayName": "Company Domain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "City",
              "displayName": "City",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "State",
              "displayName": "State",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Country",
              "displayName": "Country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Address",
              "displayName": "Email Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "displayName": "Email Verified",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "displayName": "Date Added",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "displayName": "Last Contacted Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "displayName": "Lead Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "displayName": "Follow-Up Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Score",
              "displayName": "Lead Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL (using to match)",
              "displayName": "LinkedIn Profile URL (using to match)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Apollo Contact ID",
              "displayName": "Apollo Contact ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Sequence Added Date",
              "displayName": "Sequence Added Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "\nPersonalized AI Icebreaker",
              "displayName": "\nPersonalized AI Icebreaker",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "75f437e2-c2cd-47ac-9543-86c7936920bb",
      "name": "Add Contacts3",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -6336,
        15904
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "## Select only the best leads per comapny",
        "height": 304,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -6128,
        15792
      ],
      "typeVersion": 1,
      "id": "5c4a9d33-b6d4-4d53-8727-248642c8fbbb",
      "name": "Sticky Note13",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## ⚠️ IMPORTANT: API Key Requirements\n\nThe Apollo Add to Sequence endpoint requires a **MASTER API Key**, not a regular API key.\n\nTo create a Master API Key:\n1. Go to Apollo Settings\n2. Navigate to Integrations > API\n3. Click 'Create Master Key'\n\nWithout a Master Key, you will receive a 403 Forbidden error.",
        "height": 536,
        "width": 504,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2192,
        14480
      ],
      "typeVersion": 1,
      "id": "7a6b2fea-9769-416b-8cc7-3013261fca6d",
      "name": "Sticky Note - API Key Warning"
    },
    {
      "parameters": {
        "content": "# Company Employees ICP Enrichment\núprava create apollo people 2 z 10 na 100, Loop OverBatch z 1000 na 100\n\n##  Job Title Validation\nFilters contacts based on whitelist:\n- Head of Data\n- Chief Data Officer  \n- Data Architect\n- Data Governance Lead\n- Head of Data & Analytics\n- Enterprise Data Architect\n- Data Management Specialist\n- Data Platform Lead\n- Data Strategy Director\n- CTO, CIO, Head of IT\n\nUses \"contains\" matching for flexibility.",
        "height": 1520,
        "width": 1040,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8560,
        15264
      ],
      "id": "dca001ed-0667-457d-9c4b-98f4177408bc",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "0165c486-1c9b-43aa-9ec3-9b487caaf7ef",
      "name": "Loop Over Items (1 per Batch)2",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -8496,
        16128
      ],
      "typeVersion": 3
    },
    {
      "parameters": {
        "content": "## Delete\n",
        "height": 832,
        "width": 560
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -7280,
        15344
      ],
      "id": "7455ce57-8194-416a-b10d-0c02e90596a1",
      "name": "Sticky Note1",
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -3648,
        15696
      ],
      "id": "eb98fb30-337a-40ba-90a9-a82cc81dccfc",
      "name": "Wait",
      "webhookId": "1b18a5cc-330e-4779-93e5-5e30db8fb5d2",
      "disabled": true
    },
    {
      "parameters": {
        "content": "# Best ICP Email Enrichment\nThis will enrich the best ICP person’s email",
        "height": 848,
        "width": 1504,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -6064,
        15536
      ],
      "id": "6779c7fb-28b0-483a-9b87-f8900503fc94",
      "name": "Sticky Note6",
      "disabled": true
    },
    {
      "parameters": {
        "content": "# Perosnalized AI Icebreaker\n",
        "height": 864,
        "width": 912,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -4336,
        15360
      ],
      "id": "3a874a41-0f17-480f-b7ab-7c65c85d6926",
      "name": "Sticky Note7",
      "disabled": true
    },
    {
      "parameters": {
        "content": "\n\n\n\n\n\n\n\n\n\n\n\n\nconst perPageParam = 'per_page=100';\n- je asi hodně, pak to háže výsledky jiných firem než které hledáme",
        "height": 368,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8544,
        16096
      ],
      "id": "903fe510-45b7-4830-8ff7-ddc16ebbe14b",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "content": "**Kontrola Domény**\nJestli je domena emailu shodná se zadanou domenou firmy",
        "height": 304,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8352,
        15760
      ],
      "id": "0d8dbd97-0f78-4dc5-b515-ed27da83500e",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "jsCode": " const items = $input.all();                                                                                                                                    \n  const sourceData = $('Merge Rows Which Now All Contain Domains2').all();                                                                                       \n                                                                                                                                                                 \n  function normalize(name) {                                                                                                                                     \n    if (!name) return '';                                                                                                                                        \n    return name                                                                                                                                                  \n      .toLowerCase()                                                                                                                                             \n      .replace(/\\s+(inc|llc|ltd|corp|corporation|company|co|gmbh|ag|sa|plc|limited|group|as|ab|se|a\\.s\\.)\\.?$/gi, '')                                            \n      .replace(/[^a-z0-9]/g, '');                                                                                                                                \n  }                                                                                                                                                              \n                                                                                                                                                                 \n  const allowedNames = new Set();                                                                                                                                \n  sourceData.forEach(item => {                                                                                                                                   \n    const name = item.json['Company Name'];                                                                                                                      \n    if (name) allowedNames.add(normalize(name));                                                                                                                 \n  });                                                                                                                                                            \n                                                                                                                                                                 \n  const filteredItems = items.filter(item => {                                                                                                                   \n    const companyName = item.json.organization?.name;                                                                                                            \n    return allowedNames.has(normalize(companyName));                                                                                                             \n  });                                                                                                                                                            \n                                                                                                                                                                 \n  console.log(`Input: ${items.length} → Output: ${filteredItems.length}`);                                                                                       \n                                                                                                                                                                 \n  return filteredItems;           "
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -7824,
        15904
      ],
      "id": "c35ca5d9-b0fb-4422-8148-4f8f5f52c6c0",
      "name": "Company Domain Check"
    },
    {
      "parameters": {
        "jsCode": "const baseUrl = 'https://api.apollo.io/api/v1/mixed_people/search';\nconst titles = [\n  'Head of Data',\n  'Chief Data Officer',\n  'Data Architect',\n  'Data Governance Lead',\n  'Head of Data & Analytics',\n  'Enterprise Data Architect',\n  'Data Management Specialist',\n  'Data Platform Lead',\n  'Data Strategy Director',\n  'CTO',\n  'CIO',\n  'Head of IT'\n];\nconst titleParams = titles.map(t => `person_titles[]=${encodeURIComponent(t)}`).join('&');\nconst domains = $input.all().map(item => item.json.Domain);\nconst domainParams = domains.map(d => `q_organization_domains_list[]=${encodeURIComponent(d)}`).join('&');\nconst perPageParam = 'per_page=40';\nconst fullUrl = `${baseUrl}?${titleParams}&${domainParams}&${perPageParam}`;\nreturn [{ json: { url: fullUrl } }];\n"
      },
      "id": "135177b8-c1f4-4516-b14a-41307b52e808",
      "name": "Create Apollo People Search URL",
      "type": "n8n-nodes-base.code",
      "position": [
        -8128,
        16656
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "content": "## Backup\n**URL Creation** ",
        "height": 240,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -8256,
        16560
      ],
      "id": "db59c822-dfbb-44ef-82ec-d4e4502438fc",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "jsCode": "const baseUrl = 'https://api.apollo.io/api/v1/mixed_people/api_search';\nconst titles = [\n  'Head of Data',\n  'Chief Data Officer',\n  'Data Architect',\n  'Data Governance Lead',\n  'Head of Data & Analytics',\n  'Enterprise Data Architect',\n  'Data Management Specialist',\n  'Data Platform Lead',\n  'Data Strategy Director',\n  'CTO',\n  'CIO',\n  'Head of IT',\n  'Data'\n];\nconst titleParams = titles.map(t => `person_titles[]=${encodeURIComponent(t)}`).join('&');\nconst domains = $input.all().map(item => item.json.Domain);\nconst domainParams = domains.map(d => `q_organization_domains_list[]=${encodeURIComponent(d)}`).join('&');\nconst perPageParam = 'per_page=40';\nconst fullUrl = `${baseUrl}?${titleParams}&${domainParams}&${perPageParam}`;\nreturn [{ json: { url: fullUrl } }];\n"
      },
      "id": "342271ed-a27e-4bda-ad5b-050299ccdd9a",
      "name": "Create Apollo People Search URL1",
      "type": "n8n-nodes-base.code",
      "position": [
        -8080,
        16096
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyX",
              "unit": "minutes"
            }
          ]
        },
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Companies",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit#gid=0"
        },
        "options": {}
      },
      "id": "37d5daaf-373a-4380-bb50-1d5d25f19ceb",
      "name": "Google Sheets Trigger",
      "type": "n8n-nodes-base.googleSheetsTrigger",
      "position": [
        -11936,
        16368
      ],
      "typeVersion": 1,
      "credentials": {
        "googleSheetsTriggerOAuth2Api": {
          "id": "9RJNCJEeis90cQLW",
          "name": "Google Sheets Trigger account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "backup\n",
        "height": 240,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -12016,
        16336
      ],
      "id": "f7734c05-4de3-4be3-8de0-dcddb82c9498",
      "name": "Sticky Note12"
    },
    {
      "parameters": {
        "content": "backup\n",
        "height": 240,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -10752,
        16416
      ],
      "id": "a6f84db9-53e0-4a52-9b1c-69f675499525",
      "name": "Sticky Note14"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "columns": {
          "value": {
            "Phone": "=",
            "Domain": "={{ $json.organizations[0].primary_domain }}",
            "Twitter": "=",
            "Website": "={{ $json.organizations[0].website_url }}",
            "Facebook": "=",
            "Industry": "=",
            "LinkedIn": "=",
            "Revenue ($)": "=",
            "Company Name": "={{ $json.organizations[0].name }}",
            "Founded Year": "=",
            "Headquarters": "=",
            "Total Funding": "=",
            "Company Description": "=",
            "Latest Funding Stage": "=",
            "Company Size (Employees)": "=",
            "Lastest Funding Round Date": "="
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "7d1299e9-7066-4bcc-a5f9-e42e901d6b07",
      "name": "Add Company Website",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -10688,
        16496
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "backup\n",
        "height": 240,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -9776,
        16720
      ],
      "id": "c106e6b5-7a21-46d4-b9f6-f5747863ca9f",
      "name": "Sticky Note17"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=0",
          "cachedResultName": "Companies"
        },
        "columns": {
          "value": {
            "Phone": "={{ $json.organization.sanitized_phone ?? '' }}",
            "Domain": "={{ $('Apollo Organization Enrichment2').item.json.organization.primary_domain }}",
            "Status": "Processed",
            "Twitter": "={{ $('Apollo Organization Enrichment2').item.json.organization.twitter_url }}",
            "Website": "={{ $('Apollo Organization Enrichment2').item.json.organization.website_url }}",
            "Facebook": "={{ $('Apollo Organization Enrichment2').item.json.organization.facebook_url }}",
            "Industry": "={{ $('Apollo Organization Enrichment2').item.json.organization.industries.join(\", \") }}",
            "LinkedIn": "={{ $('Apollo Organization Enrichment2').item.json.organization.linkedin_url }}",
            "Revenue ($)": "={{ $('Apollo Organization Enrichment2').item.json.organization.annual_revenue ?? '' }}",
            "Company Name": "={{ $('Apollo Organization Enrichment2').item.json.organization.name }}",
            "Founded Year": "={{ $('Apollo Organization Enrichment2').item.json.organization.founded_year }}",
            "Headquarters": "={{ $('Apollo Organization Enrichment2').item.json.organization.raw_address }}",
            "Total Funding": "={{ $('Apollo Organization Enrichment2').item.json.organization.total_funding }}",
            "Company Description": "={{ $('Apollo Organization Enrichment2').item.json.organization.short_description }}",
            "GPT Company Summary": "={{ $json.message.content }}",
            "Latest Funding Stage": "={{ $('Apollo Organization Enrichment2').item.json.organization.latest_funding_stage }}",
            "Company Size (Employees)": "={{ $('Apollo Organization Enrichment2').item.json.organization.estimated_num_employees }}",
            "Lastest Funding Round Date": "={{ \n  $('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date &&\n  DateTime.fromISO($('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date).isValid\n    ? DateTime.fromISO($('Apollo Organization Enrichment2').item.json.organization.latest_funding_round_date).toFormat('yyyy-MM-dd')\n    : ''\n}}"
          },
          "schema": [
            {
              "id": "Company Name",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Website",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Website",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Twitter",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Twitter",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Facebook",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Facebook",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Phone",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Phone",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Industry",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Industry",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Size (Employees)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Size (Employees)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Headquarters",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Headquarters",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Founded Year",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Founded Year",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Revenue ($)",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Revenue ($)",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Funding",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Total Funding",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Latest Funding Stage",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Latest Funding Stage",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lastest Funding Round Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Lastest Funding Round Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Description",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Company Summary",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Company Summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Domain"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "d7680c5b-03c0-4d55-82e4-56f6ff69ce2a",
      "name": "Add Company Details",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -9680,
        16768
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "City": "={{ $('Validate Job Title1').item.json.city }}",
            "Name": "={{ $('Validate Job Title1').item.json.name }}",
            "State": "={{ $('Validate Job Title1').item.json.state }}",
            "Company": "={{ $('Validate Job Title1').item.json.organization.name }}",
            "Country": "={{ $('Validate Job Title1').item.json.country }}",
            "Job Title": "={{ $('Validate Job Title1').item.json.title }}",
            "Date Added": "={{ $now.toUTC().toFormat('yyyy-MM-dd') }}\n",
            "Start Date": "={{ $('Validate Job Title1').item.json.employment_history[0].start_date }}",
            "Company Domain": "={{ $('Validate Job Title1').item.json.organization.primary_domain }}",
            "LinkedIn Profile URL": "={{ $('Validate Job Title1').item.json.linkedin_url }}",
            "GPT Department Classification": "={{ $('AI Department Classification1').item.json.message.content }}",
            "Lead Score": "={{ $json.content[0].text }}"
          },
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Job Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Start Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Department Classification",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "LinkedIn Profile URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn Profile URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Company Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "City",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "State",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Country",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Verified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Date Added",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Last Contacted Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Follow-Up Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Score",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Score",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "1320c1c7-b1e0-479b-9cdf-21597da7c42d",
      "name": "Add Contacts",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -6336,
        16528
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "backup\n",
        "height": 240,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -6416,
        16480
      ],
      "id": "eaa2f548-7623-4be5-b265-933d942ec494",
      "name": "Sticky Note18"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM",
          "mode": "list",
          "cachedResultName": "Copy of Company Decision Maker Discovery",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1TsaigYMJ_nlFguOmM7UvhtNvEqmDk9EnIp4bBtPVVcM/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1KqKFZ7Uxrt1MivBjLklGdPRMgNBhEc0slpthoSjt2wI/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Name": "={{ $json.name }}",
            "Job Title": "={{ $json.title }}",
            "Start Date": "=",
            "Email Address": "={{ $json.email }}",
            "Email Verified": "={{ $json.email_status === 'verified' ? 'Yes' : 'No' }}\n",
            "LinkedIn Profile URL": "={{ $json.linkedin_url }}",
            "Country": "={{ $json.country }}",
            "City": "={{ $json.city }}",
            "State": "={{ $json.state }}",
            "Lead Status": "=pending"
          },
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "schema": [
            {
              "id": "Name",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Job Title",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Job Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Start Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Start Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "GPT Department Classification",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "GPT Department Classification",
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "LinkedIn Profile URL",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "LinkedIn Profile URL",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Company Domain",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "City",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "City",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "State",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "State",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Country",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Country",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Address",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Email Address",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Email Verified",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Email Verified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date Added",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Date Added",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Contacted Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Last Contacted Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Lead Status",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Lead Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "type": "string",
              "display": true,
              "required": false,
              "displayName": "Follow-Up Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "5201fde3-9ea0-41ea-8a27-fe9caa22bd10",
      "name": "Enrich Contacts",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -4944,
        16480
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "content": "backup\n",
        "height": 240,
        "width": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -5024,
        16416
      ],
      "id": "a573e2cb-5349-44a5-83af-df6b65ebdf64",
      "name": "Sticky Note19"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "C08PU1SKSKF",
          "cachedResultName": "n8n-messages"
        },
        "text": "={{ $json.message }}",
        "otherOptions": {
          "includeLinkToWorkflow": true
        }
      },
      "id": "4c279d33-5acc-4c79-9283-1aa06ea88ecb",
      "name": "Send Weekly Report",
      "type": "n8n-nodes-base.slack",
      "position": [
        2208,
        15712
      ],
      "webhookId": "4323a085-01ed-415e-98d0-d176b96767aa",
      "typeVersion": 2.3,
      "credentials": {
        "slackOAuth2Api": {
          "id": "9OZDdXhnfY0Jj3n3",
          "name": "Slack account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 404191424,
          "mode": "list",
          "cachedResultName": "Contacts",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit#gid=404191424"
        },
        "options": {}
      },
      "id": "ff66f353-888b-4419-acc4-2b484191180f",
      "name": "Retrieve Verified Leads",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1728,
        15712
      ],
      "typeVersion": 4.5,
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Extract all items from the input\nconst items = $input.all();\n\n// Initialize Sets to store unique company domains and email addresses\nconst uniqueCompanies = new Set();\nconst uniqueEmails = new Set();\n\n// Iterate through each item to populate the Sets\nfor (const item of items) {\n  const domain = item.json['Company Domain'];\n  const email = item.json['Email Address'];\n\n  if (domain) uniqueCompanies.add(domain);\n  if (email) uniqueEmails.add(email);\n}\n\n// Create the summary message\nconst message = `This week we discovered ${uniqueEmails.size} decision makers from ${uniqueCompanies.size} companies.`;\n\n// Return the message as output\nreturn [\n  {\n    json: {\n      message,\n      companies: uniqueCompanies.size,\n      contacts: uniqueEmails.size,\n    },\n  },\n];\n"
      },
      "id": "39a5a6f8-c369-4a34-b515-3905999db01d",
      "name": "Derive Past Week's Lead Gen. Metrics",
      "type": "n8n-nodes-base.code",
      "position": [
        1952,
        15712
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                5
              ]
            }
          ]
        }
      },
      "id": "3bd7a403-f11e-4515-9455-e17319abc298",
      "name": "Weekly Report Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        1504,
        15712
      ],
      "typeVersion": 1.2,
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1296,
        15504
      ],
      "id": "95e88caf-2b2e-43eb-ac8f-833d160937af",
      "name": "Sticky Note20"
    },
    {
      "parameters": {
        "content": "{{ $json.employment_history[0].organization_name }}",
        "height": 432
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -5184,
        15424
      ],
      "id": "80df7a56-c479-4a38-9efc-076001572437",
      "name": "Sticky Note21"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "check-contact-created",
              "operator": {
                "type": "number",
                "operation": "gte"
              },
              "leftValue": "={{ $json.statusCode }}",
              "rightValue": 200
            },
            {
              "id": "check-contact-created-2",
              "operator": {
                "type": "number",
                "operation": "lt"
              },
              "leftValue": "={{ $json.statusCode }}",
              "rightValue": 300
            }
          ]
        },
        "options": {}
      },
      "id": "6fc1e151-a34f-436f-95a5-ae1f38acff84",
      "name": "Contact Created Successfully?1",
      "type": "n8n-nodes-base.if",
      "position": [
        -1408,
        15536
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apollo.io/api/v1/contacts",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"first_name\": \"{{ $json['Name'].split(' ')[0] }}\",\n  \"last_name\": \"{{ $json['Name'].split(' ').slice(1).join(' ') }}\",\n  \"email\": \"{{ $json['Email Address'] }}\",\n  \"organization_name\": \"{{ $json['Company'] }}\",\n  \"title\": \"{{ $json['Job Title'] }}\",\n  \"city\": \"{{ $json['City'] || '' }}\",\n  \"state\": \"{{ $json['State'] || '' }}\",\n  \"country\": \"{{ $json['Country'] || '' }}\",\n  \"linkedin_url\": \"{{ $json['LinkedIn Profile URL'] || '' }}\",\n  \"run_dedupe\": true\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "5ccb485e-146f-44f8-98c3-9625bce11463",
      "name": "Create Apollo Contact1",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1616,
        15536
      ],
      "typeVersion": 4.2
    },
    {
      "parameters": {
        "content": "## Backup\n",
        "height": 288,
        "width": 672
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1952,
        15456
      ],
      "id": "3fb96387-22df-40ad-b804-8a084a505a8e",
      "name": "Sticky Note22"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "filter-verified-email",
              "operator": {
                "type": "string",
                "operation": "contains"
              },
              "leftValue": "={{ $json['Email Verified'] }}",
              "rightValue": "Yes"
            },
            {
              "id": "filter-has-email",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json['Email Address'] }}",
              "rightValue": ""
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "ccd7ab5d-6e3e-4070-822a-35afc1560f1d",
      "name": "Filter Verified Emails Only1",
      "type": "n8n-nodes-base.filter",
      "position": [
        -1856,
        15536
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.apollo.io/api/v1/emailer_campaigns/693ad3629ca6fe00218dfda0/add_contact_ids",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contact_ids\": [\"{{ $json.body.contact.id }}\"],\n  \"emailer_campaign_id\": \"693ad3629ca6fe00218dfda0\",\n  \"send_email_from_email_account_id\": \"69396ac123a7e30019968ba8\",\n  \"sequence_no_email\": false,\n  \"sequence_active_in_other_campaigns\": false,\n  \"sequence_finished_in_other_campaigns\": false\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "eca60dfa-2af4-4b50-bdd4-3b4b2329376d",
      "name": "Add to Apollo Sequence_com_email",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        448,
        16768
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Everything else KKo dawiso.com\n",
        "height": 352,
        "width": 832,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -288,
        16704
      ],
      "id": "39402bd5-c924-4671-b190-71101ade2323",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## United Kingdom KKo dawiso.uk.co\n",
        "height": 352,
        "width": 832,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -480,
        16288
      ],
      "id": "68fa4846-29e9-4955-ae41-239f212d5814",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## North America KKo dawiso.us\n",
        "height": 352,
        "width": 832,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -480,
        15888
      ],
      "id": "bfeaf108-d3c1-4b88-89a8-b8ea4496c83b",
      "name": "Sticky Note3",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Nordic KKo dawiso.com\n",
        "height": 352,
        "width": 832,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -480,
        15472
      ],
      "id": "a9959cc0-c2c4-4712-943e-0d215b17bd21",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.apollo.io/api/v1/emailer_campaigns/693ad3629ca6fe00218dfda0/add_contact_ids",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contact_ids\": [\"{{ $json.body.contact.id }}\"],\n  \"emailer_campaign_id\": \"693ad3629ca6fe00218dfda0\",\n  \"send_email_from_email_account_id\": \"696642c3b9957c0019bd2bf1\",\n  \"sequence_no_email\": false,\n  \"sequence_active_in_other_campaigns\": false,\n  \"sequence_finished_in_other_campaigns\": false\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "a4d38339-0b7e-4c0f-af6f-c707cbb0f4e9",
      "name": "Add to Apollo Sequence_Email_GB",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        192,
        16416
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d25d6124-3ccd-42e8-9487-fdf6a3d0c1f6",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "United Kingdom",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -288,
        16432
      ],
      "id": "ca248f9c-b418-43f9-906f-59cf9077cca0",
      "name": "If Country Great Britain"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.apollo.io/api/v1/emailer_campaigns/693ad3629ca6fe00218dfda0/add_contact_ids",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contact_ids\": [\"{{ $json.body.contact.id }}\"],\n  \"emailer_campaign_id\": \"693ad3629ca6fe00218dfda0\",\n  \"send_email_from_email_account_id\": \"6966435c92dbbf000d95ccad\",\n  \"sequence_no_email\": false,\n  \"sequence_active_in_other_campaigns\": false,\n  \"sequence_finished_in_other_campaigns\": false\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "b8fdabeb-7022-48ae-898f-6f4450310638",
      "name": "Add to Apollo Sequence_Email_US",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        144,
        16016
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d25d6124-3ccd-42e8-9487-fdf6a3d0c1f6",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "United States",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "c742b268-4e7c-4cd2-8f81-985b6b414e56",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Canada",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -256,
        16016
      ],
      "id": "682423ee-d81e-4423-a01a-cd8cb6f2790e",
      "name": "If Country North America"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "4355bada-945a-4be0-96cc-28521ebcae2b",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Denmark",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "99650756-3420-4315-a299-b15b41f41161",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Iceland",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "7a638dc8-7e38-4417-9a7b-ed3fe1fc0e4c",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Sweden",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "5146253b-2a9e-4ad5-a2b3-89d1cdbc21c4",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Norway",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "9fcd5b60-cd92-455b-b9b2-e90de224b65c",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Finland",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -272,
        15600
      ],
      "id": "ea30cc5f-5737-4a0e-a20b-4939d26b8993",
      "name": "If Nordic Country"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09GNDM3DFA",
          "mode": "list",
          "cachedResultName": "dw-n8n-snitcher-outreach-wf"
        },
        "text": "={{ $json.slackMessage }}",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        -112,
        14528
      ],
      "id": "1bcb5e84-8bf0-47fa-9753-eee9f8602ddd",
      "name": "Send a message",
      "webhookId": "a29692ea-7013-4580-b997-e57073422305",
      "credentials": {
        "slackOAuth2Api": {
          "id": "9OZDdXhnfY0Jj3n3",
          "name": "Slack account 2"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.apollo.io/api/v1/emailer_campaigns/693ad3629ca6fe00218dfda0/add_contact_ids",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"contact_ids\": [\"{{ $json.body.contact.id }}\"],\n  \"emailer_campaign_id\": \"693ad3629ca6fe00218dfda0\",\n  \"send_email_from_email_account_id\": \"69396ac123a7e30019968ba8\",\n  \"sequence_no_email\": false,\n  \"sequence_active_in_other_campaigns\": false,\n  \"sequence_finished_in_other_campaigns\": false\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "ef92e32b-5bb8-4927-9b8b-6da7dc0fc4bf",
      "name": "Add to Apollo Sequence_Nordics",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        144,
        15600
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "LinkedIn Profile URL": "={{ $('Filter Verified Emails Only').item.json['LinkedIn Profile URL'] }}",
            "Lead Status": "=error_contact_creation",
            "ID": "={{ $json.ID }}"
          },
          "matchingColumns": [
            "ID"
          ],
          "schema": [
            {
              "id": "ID",
              "displayName": "ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Start Date",
              "displayName": "Start Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "GPT Department Classification",
              "displayName": "GPT Department Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn Profile URL",
              "displayName": "LinkedIn Profile URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "displayName": "Company Domain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "City",
              "displayName": "City",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "State",
              "displayName": "State",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Country",
              "displayName": "Country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Address",
              "displayName": "Email Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Verified",
              "displayName": "Email Verified",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Date Added",
              "displayName": "Date Added",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Last Contacted Date",
              "displayName": "Last Contacted Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lead Status",
              "displayName": "Lead Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "displayName": "Follow-Up Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lead Score",
              "displayName": "Lead Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn Profile URL (using to match)",
              "displayName": "LinkedIn Profile URL (using to match)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Apollo Contact ID",
              "displayName": "Apollo Contact ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Sequence Added Date",
              "displayName": "Sequence Added Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "\nPersonalized AI Icebreaker",
              "displayName": "\nPersonalized AI Icebreaker",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "102cf776-4c6d-4f43-8820-72b0fca49737",
      "name": "Log Contact Creation Error",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -400,
        16960
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "check-contact-created",
              "operator": {
                "type": "number",
                "operation": "gte"
              },
              "leftValue": "={{ $json.statusCode }}",
              "rightValue": 200
            },
            {
              "id": "check-contact-created-2",
              "operator": {
                "type": "number",
                "operation": "lt"
              },
              "leftValue": "={{ $json.statusCode }}",
              "rightValue": 300
            }
          ]
        },
        "options": {}
      },
      "id": "1c8213ca-f2c8-4e70-8e19-3ad412713f2b",
      "name": "Contact Created Successfully?",
      "type": "n8n-nodes-base.if",
      "position": [
        -736,
        15984
      ],
      "typeVersion": 2.2
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw",
          "mode": "list",
          "cachedResultName": "n8n-Snitcher-apollo",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1WlYH5gne-Fmlpn5ES6TpBrU5rl2B3WOJJ30DmWbeBDw/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 404191424,
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1Nt7cBLwwIr7kRCj6VL3wQDqfkfbL3j_dwlHHpExrL_s/edit#gid=404191424",
          "cachedResultName": "Contacts"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "LinkedIn Profile URL": "={{ $('Create Apollo Contact').item.json.body.contact.linkedin_url }}",
            "Lead Status": "=in_sequence",
            "Apollo Contact ID": "={{ $('Create Apollo Contact').item.json.body.contact.id }}",
            "Sequence Added Date": "={{ $now.toUTC().toFormat('yyyy-MM-dd HH:mm:ss') }}"
          },
          "matchingColumns": [
            "LinkedIn Profile URL"
          ],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Job Title",
              "displayName": "Job Title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Company",
              "displayName": "Company",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Start Date",
              "displayName": "Start Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "GPT Department Classification",
              "displayName": "GPT Department Classification",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn Profile URL",
              "displayName": "LinkedIn Profile URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Company Domain",
              "displayName": "Company Domain",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "City",
              "displayName": "City",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "State",
              "displayName": "State",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Country",
              "displayName": "Country",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Address",
              "displayName": "Email Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Email Verified",
              "displayName": "Email Verified",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Date Added",
              "displayName": "Date Added",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Last Contacted Date",
              "displayName": "Last Contacted Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lead Status",
              "displayName": "Lead Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Follow-Up Date",
              "displayName": "Follow-Up Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Lead Score",
              "displayName": "Lead Score",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "LinkedIn Profile URL (using to match)",
              "displayName": "LinkedIn Profile URL (using to match)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Apollo Contact ID",
              "displayName": "Apollo Contact ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Sequence Added Date",
              "displayName": "Sequence Added Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "id": "a8592b87-19a8-48a5-a85d-f92dee8cb7be",
      "name": "Update Status: In Sequence",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        960,
        15760
      ],
      "typeVersion": 4.5,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Pn2GUzlXmmuAgNiD",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {},
      "id": "1ab66414-fc0d-4199-93aa-08db092af7d5",
      "name": "Wait (Rate Limit)",
      "type": "n8n-nodes-base.wait",
      "position": [
        832,
        17040
      ],
      "webhookId": "apollo-rate-limit-wait",
      "typeVersion": 1.1
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "ebbd6974-9b89-4c90-b98e-aabdf8be3ec7",
      "name": "Loop Contacts (1 per batch - rate limit)",
      "type": "n8n-nodes-base.splitInBatches",
      "position": [
        -1888,
        15936
      ],
      "typeVersion": 3,
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.apollo.io/api/v1/contacts",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n    \"accept\": \"application/json\",\n    \"Cache-Control\": \"no-cache\",\n    \"Content-Type\": \"application/json\",\n    \"x-api-key\": \"FLpgP9YuR65beAH6lqWBKQ\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"first_name\": \"{{ $json['Name'].split(' ')[0] }}\",\n  \"last_name\": \"{{ $json['Name'].split(' ').slice(1).join(' ') }}\",\n  \"email\": \"{{ $json['Email Address'] }}\",\n  \"organization_name\": \"{{ $json['Company'] }}\",\n  \"title\": \"{{ $json['Job Title'] }}\",\n  \"city\": \"{{ $json['City'] || '' }}\",\n  \"state\": \"{{ $json['State'] || '' }}\",\n  \"country\": \"{{ $json['Country'] || '' }}\",\n  \"linkedin_url\": \"{{ $json['LinkedIn Profile URL'] || '' }}\",\n  \"run_dedupe\": true\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "id": "465e9c3e-8370-44e4-ab4f-5e9460b105f9",
      "name": "Create Apollo Contact",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        -1072,
        15904
      ],
      "typeVersion": 4.2,
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "filter-verified-email",
              "operator": {
                "type": "string",
                "operation": "contains"
              },
              "leftValue": "={{ $json['Email Verified'] }}",
              "rightValue": "Yes"
            },
            {
              "id": "filter-has-email",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{ $json['Email Address'] }}",
              "rightValue": ""
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "3885ac1d-cc4d-453a-bb1c-590988bae382",
      "name": "Filter Verified Emails Only",
      "type": "n8n-nodes-base.filter",
      "position": [
        -2784,
        16032
      ],
      "typeVersion": 2.2,
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "## 🚀 NEW: APOLLO SEQUENCE INTEGRATION\n\nThis section creates contacts in Apollo and adds them to a sequence.\n\n### Required Setup:\n1. Replace YOUR_APOLLO_MASTER_API_KEY with your Apollo Master API key\n2. Replace YOUR_SEQUENCE_ID with your Apollo sequence ID\n3. Replace YOUR_EMAIL_ACCOUNT_ID with your Apollo mailbox ID\n\n### How to find these IDs:\n- Sequence ID: Go to Sequences in Apollo, click on your sequence, the ID is in the URL\n- Email Account ID: Use Apollo API endpoint GET /email_accounts to list all mailboxes\n- Master API Key: Settings > Integrations > API > Create Master Key",
        "height": 2404,
        "width": 3072,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2112,
        14976
      ],
      "typeVersion": 1,
      "id": "aaeddeb2-9fe1-4267-9bf0-6adb247b080a",
      "name": "Sticky Note - Apollo Sequence Setup"
    },
    {
      "parameters": {
        "content": "Musím ještě udělat že CZ firmy nepujdou do sekvence \n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        48,
        15120
      ],
      "id": "c654c0ba-3763-4af0-aa25-34d5efcdd2b9",
      "name": "Sticky Note24"
    },
    {
      "parameters": {
        "content": "## Is CZ?\n",
        "height": 352,
        "width": 832,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -480,
        15056
      ],
      "id": "67cdbf77-7330-4c4e-ae08-8ebc71dc78b7",
      "name": "Sticky Note25"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "d25d6124-3ccd-42e8-9487-fdf6a3d0c1f6",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Czechia",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "2ea2d6ab-64fd-418d-b888-a14bc845b7dc",
              "leftValue": "={{ $json.body.contact.country }}",
              "rightValue": "Czech Republic",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -336,
        15184
      ],
      "id": "93b481ce-ffcc-4c63-8de8-fbb677f4c11a",
      "name": "If Country Czech Rep"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -8288,
        15216
      ],
      "id": "a25c89b7-aad4-40e8-82be-ec023eb97572",
      "name": "Execute a SQL query",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "sqlQuery": "SELECT \n  company_name,\n  domain\nFROM `dawiso-marketing-dwh.snitcher.n8n_table`\nWHERE status != 'processed' OR status IS NULL;",
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -11536,
        15728
      ],
      "id": "52aadcbf-a326-4446-9a46-9ef79ef85245",
      "name": "SELECt unprocessed companies",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "insert",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "datasetId": {
          "__rl": true,
          "value": "snitcher",
          "mode": "list",
          "cachedResultName": "snitcher"
        },
        "tableId": {
          "__rl": true,
          "value": "n8n_table",
          "mode": "list",
          "cachedResultName": "n8n_table"
        },
        "dataMode": "define",
        "fieldsUi": {
          "values": [
            {
              "fieldId": "company_name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -10320,
        15792
      ],
      "id": "00ff9311-5f96-408e-a7c9-1c516a3325d9",
      "name": "Insert rows in a table",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "sendAndWait",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C09GNDM3DFA",
          "mode": "list",
          "cachedResultName": "dw-n8n-snitcher-outreach-wf"
        },
        "message": "={{ $json.slackMessage }}",
        "options": {}
      },
      "id": "df626404-0afd-4f68-afc0-61a0014d1031",
      "name": "Approve Company Website",
      "type": "n8n-nodes-base.slack",
      "position": [
        -2208,
        15472
      ],
      "webhookId": "830f75dd-f56e-4086-90ac-72ca14e226ce",
      "typeVersion": 2.3,
      "credentials": {
        "slackOAuth2Api": {
          "id": "9OZDdXhnfY0Jj3n3",
          "name": "Slack account 2"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "insert",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "datasetId": {
          "__rl": true,
          "value": "snitcher",
          "mode": "list",
          "cachedResultName": "snitcher"
        },
        "tableId": {
          "__rl": true,
          "value": "n8n_apollo_contacts",
          "mode": "list",
          "cachedResultName": "n8n_apollo_contacts"
        },
        "dataMode": "define",
        "fieldsUi": {
          "values": [
            {
              "fieldId": "name",
              "fieldValue": "={{ $('AI Department Classification1').item.json.first_name }} {{ $('AI Department Classification1').item.json.last_name_obfuscated }}"
            },
            {
              "fieldId": "job_title",
              "fieldValue": "={{ $('AI Department Classification1').item.json.title }}"
            },
            {
              "fieldId": "company",
              "fieldValue": "={{ $('AI Department Classification1').item.json.organization.name }}"
            },
            {
              "fieldId": "lead_score",
              "fieldValue": "={{ $json.content[0].text }}"
            },
            {
              "fieldId": "id",
              "fieldValue": "={{ $('AI Department Classification1').item.json.id }}"
            },
            {
              "fieldId": "date_added",
              "fieldValue": "={{ $now.toUTC().toFormat('yyyy-MM-dd') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -6336,
        16096
      ],
      "id": "d0f9d738-ee81-4393-aeac-41dde02e861c",
      "name": "Insert rows in a table1",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "insert",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "datasetId": {
          "__rl": true,
          "value": "snitcher",
          "mode": "list",
          "cachedResultName": "snitcher"
        },
        "tableId": {
          "__rl": true,
          "value": "n8n_table",
          "mode": "list",
          "cachedResultName": "n8n_table"
        },
        "dataMode": "define",
        "fieldsUi": {
          "values": [
            {
              "fieldId": "company_name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -3968,
        15872
      ],
      "id": "d89a80f9-0d64-4f72-a8d8-50006ca53de9",
      "name": "Insert rows in a table2",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "insert",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "datasetId": {
          "__rl": true,
          "value": "snitcher",
          "mode": "list",
          "cachedResultName": "snitcher"
        },
        "tableId": {
          "__rl": true,
          "value": "n8n_apollo_contacts_in_sequence",
          "mode": "list",
          "cachedResultName": "n8n_apollo_contacts_in_sequence"
        },
        "dataMode": "define",
        "fieldsUi": {
          "values": [
            {
              "fieldId": "company_name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        928,
        15312
      ],
      "id": "230ad42e-ce6a-49db-84b7-1cde60dedddd",
      "name": "Insert rows in a table3",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "insert",
        "projectId": {
          "__rl": true,
          "value": "dawiso-marketing-dwh",
          "mode": "list",
          "cachedResultName": "Dawiso Marketing DWH",
          "cachedResultUrl": "https://console.cloud.google.com/bigquery?project=dawiso-marketing-dwh"
        },
        "datasetId": {
          "__rl": true,
          "value": "snitcher",
          "mode": "list",
          "cachedResultName": "snitcher"
        },
        "tableId": {
          "__rl": true,
          "value": "n8n_table",
          "mode": "list",
          "cachedResultName": "n8n_table"
        },
        "dataMode": "define",
        "fieldsUi": {
          "values": [
            {
              "fieldId": "company_name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleBigQuery",
      "typeVersion": 2.1,
      "position": [
        -384,
        16720
      ],
      "id": "ecabe5bf-11dc-4814-8cb8-dee72f634de2",
      "name": "Insert rows in a table4",
      "credentials": {
        "googleApi": {
          "id": "y7qvlA7mPXbwk83S",
          "name": "Google BigQuery account 2"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();                                                                                                                                    \n                                                                                                                                                                 \n  // Group by company                                                                                                                                            \n  const companiesMap = {};                                                                                                                                       \n                                                                                                                                                                 \n  items.forEach(item => {                                                                                                                                        \n    const company = item.json['Company'] || 'Unknown';                                                                                                           \n    const country = item.json['Country'] || '';                                                                                                                  \n                                                                                                                                                                 \n    if (!companiesMap[company]) {                                                                                                                                \n      companiesMap[company] = {                                                                                                                                  \n        name: company,                                                                                                                                           \n        country: country,                                                                                                                                        \n        contacts: [],                                                                                                                                            \n        topScore: 0                                                                                                                                              \n      };                                                                                                                                                         \n    }                                                                                                                                                            \n                                                                                                                                                                 \n    companiesMap[company].contacts.push({                                                                                                                        \n      name: item.json['Name'],                                                                                                                                   \n      title: item.json['Job Title'],                                                                                                                             \n      score: parseInt(item.json['Lead Score']) || 0,                                                                                                             \n      email: item.json['Email Address']                                                                                                                          \n    });                                                                                                                                                          \n                                                                                                                                                                 \n    const score = parseInt(item.json['Lead Score']) || 0;                                                                                                        \n    if (score > companiesMap[company].topScore) {                                                                                                                \n      companiesMap[company].topScore = score;                                                                                                                    \n    }                                                                                                                                                            \n  });                                                                                                                                                            \n                                                                                                                                                                 \n  const companies = Object.values(companiesMap);                                                                                                                 \n  const totalContacts = items.length;                                                                                                                            \n  const totalCompanies = companies.length;                                                                                                                       \n                                                                                                                                                                 \n  // Company list for Slack                                                                                                                                      \n  const companyList = companies                                                                                                                                  \n    .sort((a, b) => b.topScore - a.topScore)                                                                                                                     \n    .map(c => {                                                                                                                                                  \n      const contactNames = c.contacts.map(ct => `${ct.name} (${ct.title}, Score: ${ct.score})`).join('\\n      ');                                                \n      return `• *${c.name}*${c.country ? ` (${c.country})` : ''}\\n      ${contactNames}`;                                                                        \n    })                                                                                                                                                           \n    .join('\\n\\n');                                                                                                                                               \n                                                                                                                                                                 \n  // Slack summary                                                                                                                                               \n  const slackMessage = `🚀 *Apollo Outreach - Summary for Approval*                                                                                              \n                                                                                                                                                                 \n  📊 *Statistics:*                                                                                                                                               \n  • Total contacts: *${totalContacts}*                                                                                                                           \n  • Number of companies: *${totalCompanies}*                                                                                                                     \n                                                                                                                                                                 \n  📋 *The following companies will be added to sequence:*                                                                                                        \n                                                                                                                                                                 \n  ${companyList}                                                                                                                                                 \n                                                                                                                                                                 \n  ---                                                                                                                                                            \n  ✅ Approve | ❌ Reject`;                                                                                                                                       \n                                                                                                                                                                 \n  return [{                                                                                                                                                      \n    json: {                                                                                                                                                      \n      slackMessage: slackMessage,                                                                                                                                \n      totalContacts: totalContacts,                                                                                                                              \n      totalCompanies: totalCompanies,                                                                                                                            \n      companies: companies,                                                                                                                                      \n      originalItems: items.map(i => i.json)                                                                                                                      \n    }                                                                                                                                                            \n  }];                                      "
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2448,
        15472
      ],
      "id": "fae42857-24b6-4e7b-8a77-15d7c5386845",
      "name": "Summary for approval"
    },
    {
      "parameters": {
        "jsCode": "  const items = $input.all();                                                                                                                                    \n                                                                                                                                                                 \n  // Zkus získat počet errorů z Log Contact Creation Error node                                                                                                  \n  let errorCount = 0;                                                                                                                                            \n  let errorContacts = [];                                                                                                                                        \n                                                                                                                                                                 \n  try {                                                                                                                                                          \n    const errors = $('Log Contact Creation Error').all();                                                                                                        \n    errorCount = errors.length;                                                                                                                                  \n    errorContacts = errors.map(e => ({                                                                                                                           \n      name: e.json['Name'] || 'Unknown',                                                                                                                         \n      company: e.json['Company'] || 'Unknown',                                                                                                                   \n      error: e.json['error'] || 'Contact creation failed'                                                                                                        \n    }));                                                                                                                                                         \n  } catch (e) {                                                                                                                                                  \n    // Node neměl žádné položky nebo neexistuje v této větvi                                                                                                     \n    errorCount = 0;                                                                                                                                              \n  }                                                                                                                                                              \n                                                                                                                                                                 \n  // Spočítej úspěšné                                                                                                                                            \n  const successCount = items.length;                                                                                                                             \n  const totalAttempted = successCount + errorCount;                                                                                                              \n                                                                                                                                                                 \n  // Group by sequence (úspěšné)                                                                                                                                 \n  const sequenceMap = {};                                                                                                                                        \n  items.forEach(item => {                                                                                                                                        \n    const sequence = item.json['Sequence'] || item.json['sequenceName'] || 'Default Sequence';                                                                   \n    const company = item.json['Company'] || 'Unknown';                                                                                                           \n                                                                                                                                                                 \n    if (!sequenceMap[sequence]) {                                                                                                                                \n      sequenceMap[sequence] = { name: sequence, companies: new Set(), contacts: 0 };                                                                             \n    }                                                                                                                                                            \n    sequenceMap[sequence].companies.add(company);                                                                                                                \n    sequenceMap[sequence].contacts++;                                                                                                                            \n  });                                                                                                                                                            \n                                                                                                                                                                 \n  const sequences = Object.values(sequenceMap);                                                                                                                  \n  const totalCompanies = new Set(items.map(i => i.json['Company'])).size;                                                                                        \n                                                                                                                                                                 \n  // Sequence breakdown                                                                                                                                          \n  const sequenceList = sequences                                                                                                                                 \n    .map(s => `• *${s.name}*: ${s.companies.size} companies (${s.contacts} contacts)`)                                                                           \n    .join('\\n');                                                                                                                                                 \n                                                                                                                                                                 \n  // Error list (max 5)                                                                                                                                          \n  const errorList = errorContacts.length > 0                                                                                                                     \n    ? errorContacts.slice(0, 5).map(e => `• ${e.name} (${e.company})`).join('\\n')                                                                                \n    : 'None';                                                                                                                                                    \n                                                                                                                                                                 \n  // Final Slack summary                                                                                                                                         \n  const slackMessage = `✅ *Apollo Outreach - Completed*                                                                                                         \n                                                                                                                                                                 \n  📊 *Summary:*                                                                                                                                                  \n  • Total attempted: *${totalAttempted}*                                                                                                                         \n  • Successfully added: *${successCount}* ✅                                                                                                                     \n  • Errors: *${errorCount}* ${errorCount > 0 ? '⚠️' : ''}                                                                                                        \n                                                                                                                                                                 \n  📬 *Breakdown by sequence:*                                                                                                                                    \n  ${sequenceList}                                                                                                                                                \n                                                                                                                                                                 \n  ${errorCount > 0 ? `❌ *Failed contacts:*\\n${errorList}${errorContacts.length > 5 ? `\\n_...and ${errorContacts.length - 5} more_` : ''}` : ''}                 \n                                                                                                                                                                 \n  🎉 Workflow completed.`;                                                                                                                                       \n                                                                                                                                                                 \n  return [{                                                                                                                                                      \n    json: {                                                                                                                                                      \n      slackMessage: slackMessage,                                                                                                                                \n      totalAttempted: totalAttempted,                                                                                                                            \n      successCount: successCount,                                                                                                                                \n      errorCount: errorCount,                                                                                                                                    \n      errorContacts: errorContacts,                                                                                                                              \n      sequences: sequences.map(s => ({                                                                                                                           \n        name: s.name,                                                                                                                                            \n        companies: Array.from(s.companies),                                                                                                                      \n        contactCount: s.contacts                                                                                                                                 \n      }))                                                                                                                                                        \n    }                                                                                                                                                            \n  }]; "
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -400,
        14528
      ],
      "id": "300d695e-f496-4f6e-91cf-ea3f78f62f06",
      "name": "Slack Summary"
    }
  ],
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "SELECt unprocessed companies",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets Trigger2": {
      "main": [
        [
          {
            "node": "Select Unprocessed Companies2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Organization Enrichment2": {
      "main": [
        [
          {
            "node": "Message a model4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo People Search URL2": {
      "main": [
        []
      ]
    },
    "Apollo Find Decision Makers2": {
      "main": [
        [
          {
            "node": "Loop Over Items (1 per Batch)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Contacts2": {
      "main": [
        []
      ]
    },
    "Apollo Enrich Decision Makers2": {
      "main": [
        [
          {
            "node": "Loop Over Items For Bulk Enrichment (10 per batch)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo People Enrichment Payload2": {
      "main": [
        [
          {
            "node": "Apollo Enrich Decision Makers2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enrich Contacts2": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items For Bulk Enrichment (10 per batch)2": {
      "main": [
        [
          {
            "node": "Split Out Batched Enrichment Response2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Apollo People Enrichment Payload2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Apollo Organization Search2": {
      "main": [
        [
          {
            "node": "Add Company Website2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Company Website2": {
      "main": [
        [
          {
            "node": "Approve Company Website2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge Rows Which Now All Contain Domains2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Company Details2": {
      "main": [
        [
          {
            "node": "Loop Over Items (1 per Batch)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select Unprocessed Companies2": {
      "main": [
        [
          {
            "node": "Is Domain Already Provided?2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Domain Already Provided?2": {
      "main": [
        [
          {
            "node": "Merge Rows Which Now All Contain Domains2",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Apollo Organization Search2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Batched Decision Maker Response2": {
      "main": [
        [
          {
            "node": "Company Domain Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Batched Enrichment Response2": {
      "main": [
        [
          {
            "node": "Enrich Contacts2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Rows Which Now All Contain Domains2": {
      "main": [
        [
          {
            "node": "Apollo Organization Enrichment2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model4": {
      "main": [
        [
          {
            "node": "Add Company Details2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validate Job Title1": {
      "main": [
        [
          {
            "node": "AI Department Classification1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Department Classification1": {
      "main": [
        [
          {
            "node": "AI Lead Scoring1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Lead Scoring1": {
      "main": [
        [
          {
            "node": "Add Contacts3",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Select Top Lead Per Company": {
      "main": [
        [
          {
            "node": "Loop Over Items For Bulk Enrichment (10 per batch)2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add Contacts3": {
      "main": [
        [
          {
            "node": "Select Top Lead Per Company",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items (1 per Batch)2": {
      "main": [
        [
          {
            "node": "Split Out Batched Decision Maker Response2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Apollo People Search URL1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Filter Verified Emails Only",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Company Domain Check": {
      "main": [
        [
          {
            "node": "Validate Job Title1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo People Search URL1": {
      "main": [
        [
          {
            "node": "Apollo Find Decision Makers2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Weekly Report Trigger": {
      "main": [
        [
          {
            "node": "Retrieve Verified Leads",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Verified Leads": {
      "main": [
        [
          {
            "node": "Derive Past Week's Lead Gen. Metrics",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Derive Past Week's Lead Gen. Metrics": {
      "main": [
        [
          {
            "node": "Send Weekly Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo Contact1": {
      "main": [
        [
          {
            "node": "Contact Created Successfully?1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter Verified Emails Only1": {
      "main": [
        [
          {
            "node": "Create Apollo Contact1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Country Great Britain": {
      "main": [
        [
          {
            "node": "Add to Apollo Sequence_Email_GB",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Add to Apollo Sequence_com_email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Country North America": {
      "main": [
        [
          {
            "node": "Add to Apollo Sequence_Email_US",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If Country Great Britain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Nordic Country": {
      "main": [
        [
          {
            "node": "Add to Apollo Sequence_Nordics",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "If Country North America",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add to Apollo Sequence_com_email": {
      "main": [
        [
          {
            "node": "Update Status: In Sequence",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add to Apollo Sequence_Email_GB": {
      "main": [
        [
          {
            "node": "Update Status: In Sequence",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add to Apollo Sequence_Email_US": {
      "main": [
        [
          {
            "node": "Update Status: In Sequence",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add to Apollo Sequence_Nordics": {
      "main": [
        [
          {
            "node": "Update Status: In Sequence",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log Contact Creation Error": {
      "main": [
        [
          {
            "node": "Wait (Rate Limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Contact Created Successfully?": {
      "main": [
        [
          {
            "node": "Add to Apollo Sequence_com_email",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Log Contact Creation Error",
            "type": "main",
            "index": 0
          },
          {
            "node": "Insert rows in a table4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Status: In Sequence": {
      "main": [
        [
          {
            "node": "Wait (Rate Limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait (Rate Limit)": {
      "main": [
        [
          {
            "node": "Loop Contacts (1 per batch - rate limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Contacts (1 per batch - rate limit)": {
      "main": [
        [
          {
            "node": "Slack Summary",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Apollo Contact",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Apollo Contact": {
      "main": [
        [
          {
            "node": "Contact Created Successfully?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter Verified Emails Only": {
      "main": [
        [
          {
            "node": "Summary for approval",
            "type": "main",
            "index": 0
          },
          {
            "node": "Loop Contacts (1 per batch - rate limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        []
      ]
    },
    "If Country Czech Rep": {
      "main": [
        [],
        [
          {
            "node": "If Nordic Country",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table": {
      "main": [
        [
          {
            "node": "Merge Rows Which Now All Contain Domains2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table1": {
      "main": [
        [
          {
            "node": "Select Top Lead Per Company",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table2": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table3": {
      "main": [
        [
          {
            "node": "Wait (Rate Limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert rows in a table4": {
      "main": [
        [
          {
            "node": "Wait (Rate Limit)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Summary for approval": {
      "main": [
        [
          {
            "node": "Approve Company Website",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slack Summary": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "8a54286b-c7bc-4bb7-a2fb-8e4dbe9f32ef",
  "activeVersionId": null,
  "versionCounter": 76,
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-09-14T12:00:59.572Z",
      "createdAt": "2025-09-14T12:00:59.572Z",
      "role": "workflow:owner",
      "workflowId": "Qa9cQUtBYZolfA2h",
      "projectId": "heExzw54j2eITUZk",
      "project": {
        "updatedAt": "2025-08-14T12:32:57.000Z",
        "createdAt": "2025-08-14T12:32:24.276Z",
        "id": "heExzw54j2eITUZk",
        "name": "dw-scrapping",
        "type": "team",
        "icon": {
          "type": "icon",
          "value": "layers"
        },
        "description": "Scrapping dat ze source pro účely sales / mktg",
        "projectRelations": [
          {
            "updatedAt": "2025-08-14T12:32:57.743Z",
            "createdAt": "2025-08-14T12:32:57.743Z",
            "userId": "942e8061-8365-41f7-9bb5-ce2fd9fc7a8c",
            "projectId": "heExzw54j2eITUZk",
            "user": {
              "updatedAt": "2026-01-30T06:27:27.000Z",
              "createdAt": "2025-08-14T12:31:36.350Z",
              "id": "942e8061-8365-41f7-9bb5-ce2fd9fc7a8c",
              "email": "david.hofman@dawiso.com",
              "firstName": "David",
              "lastName": "Hofman",
              "personalizationAnswers": null,
              "settings": {
                "userActivated": true,
                "easyAIWorkflowOnboarded": true,
                "firstSuccessfulWorkflowId": "eSm9CK1Cvvbh7sFo",
                "userActivatedAt": 1756720855115,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1757493752352
                }
              },
              "disabled": false,
              "mfaEnabled": false,
              "lastActiveAt": "2026-01-29",
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": [
    {
      "updatedAt": "2026-01-07T20:04:32.244Z",
      "createdAt": "2026-01-07T20:04:32.244Z",
      "id": "dKC72U3tLP5znJm8",
      "name": "PROD"
    },
    {
      "updatedAt": "2026-01-07T20:04:37.758Z",
      "createdAt": "2026-01-07T20:04:37.758Z",
      "id": "mX4dw9NncpNLnuUb",
      "name": "DEV"
    }
  ],
  "activeVersion": null
}
